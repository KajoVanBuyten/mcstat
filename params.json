{
  "name": "randomhost/mcstat",
  "tagline": "Retrieves status information from a Minecraft server.",
  "body": "[![Build Status][0]][1]\r\n\r\nIntroduction\r\n============\r\n\r\nPHP class, web page, CLI tool, and [Munin][2] plugin to get information from a\r\n[Minecraft][3] server.\r\n\r\nProtocol Support\r\n----------------\r\n\r\nmcstat supports [Server List Ping][4] as seen in `1.7` and later, and `1.5.2`.\r\nServer List Ping `1.5.2` works for older Minecraft servers (all the way back to\r\n`1.4.2`), while the `1.7` Server List Ping should be used for newer setups.\r\nmcstat also supports the UDP full and basic [Query][5] protocols.\r\n\r\nUsage\r\n-----\r\n\r\n### minecraft_users_ — A Munin plugin\r\n\r\n![Screenshot of the minecraft_users_ plugin][6]\r\n\r\nInstall `minecraft_users_` like any other munin plugin:\r\n\r\n```bash\r\n# compile stand-alone minecraft_users_ script\r\nmake\r\n\r\n# copy the compiled script file to the munin plugins directory\r\ncp minecraft_users_ /usr/share/munin/plugins/minecraft_users_\r\n\r\n# ensure that munin can execute the script\r\nchmod 755 /usr/share/munin/plugins/minecraft_users\r\n\r\n# create symlinks for the desired Minecraft server hostname and port\r\nexport hostname=\"localhost\"\r\nexport port=25565\r\nln -s /usr/share/munin/plugins/minecraft_users_ \\\r\n    /etc/munin/plugins/minecraft_users_${hostname}:${port}\r\n    \r\n# reload munin service\r\nservice munin-node reload\r\n```\r\n\r\nNo configuration is necessary because `minecraft_users_` is a wildcard plugin.\r\n\r\n### mcstat as a program\r\n\r\n`src/bin/mcstat.php` is a script for querying Minecraft servers. You can install\r\na stand-alone version like so:\r\n\r\n```bash\r\nmake\r\ncp mcstat ~/bin/mcstat\r\n```\r\n\r\nIt's very simple and gets the job done:\r\n\r\n```bash\r\nmcstat play.gotpvp.com\r\n```\r\n\r\nThis will output the status of the given server like so:\r\n\r\n```\r\nplay.gotpvp.com 1.7.4 2714/5000 131ms\r\nUberminecraft Cloud | 22 Games\r\n1.7 Play Now!\r\n```\r\n\r\n*Please note: [`TERM` must be set to a known terminal][7], otherwise PHP spams\r\nstderr unconditionally.*\r\n\r\n### stat.php\r\n\r\n`src/www/stat.php` is a simple web page that lets users query a given server.\r\n\r\n**Note:** `stat.php` shouldn't be used on a public server as it's not well tested!\r\n\r\n![Screenshot of stat.php][8]\r\n\r\n### Usage as a PHP Class\r\n\r\n```php\r\n<?php\r\nnamespace randomhost\\Minecraft;\r\n\r\nrequire_once realpath(__DIR__ . '/../../vendor') . '/autoload.php';\r\n\r\n$status = new Status('play.gotpvp.com');\r\nvar_dump($status->ping());\r\n```\r\n\r\nThis outputs server information in the following format:\r\n\r\n```\r\narray(6) {\r\n    [\"player_count\"]=>\r\n    string(3) \"162\"\r\n    [\"player_max\"]=>\r\n    string(4) \"5000\"\r\n    [\"motd\"]=>\r\n    string(182) \"§f§f       §f§m-§a§m-§c§m-§d§m-§b§m] §b§l    GotPVP-Network    §b§m-[§d§m-§c§m-§a§m-§e§m-§f\"\r\n    [\"server_version\"]=>\r\n    string(31) \"BungeeCord 1.8.x, 1.9.x, 1.10.x\"\r\n    [\"protocol_version\"]=>\r\n    string(3) \"127\"\r\n    [\"latency\"]=>\r\n    float(293)\r\n}\r\n```\r\n\r\n## Testing\r\n\r\nThe testing script requires `bash`, [`phpunit`][9], and `java`. The tests are\r\nran against against a live server running on localhost.\r\n\r\nRun the script as follows:\r\n\r\n```php\r\nmake test\r\n```\r\n\r\nBy default `src/tests/unit-tests/bin/testrunner.sh` tests against all server\r\nversions `1.4.2` and later.\r\n\r\nOverride this like so:\r\n\r\n```bash\r\nenv Versions='1.7.4 1.7.5' make test\r\n```\r\n\r\n\r\n[0]: https://travis-ci.org/randomhost/mcstat.svg?branch=composer\r\n[1]: https://travis-ci.org/randomhost/mcstat\r\n[2]: http://munin-monitoring.org/\r\n[3]: http://www.minecraft.net/\r\n[4]: http://wiki.vg/Server_List_Ping\r\n[5]: http://wiki.vg/Query\r\n[6]: src/data/munin-plugin.png\r\n[7]: https://github.com/nodesocket/commando/issues/9\r\n[8]: src/data/minecraft-server-status.png\r\n[9]: http://phpunit.de/\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}